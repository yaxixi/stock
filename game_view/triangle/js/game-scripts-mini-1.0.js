(function(e,t,n){var r=qc.defineBehaviour("qc.engine.Main",qc.Behaviour,function(){this.success_btn=null,this.lose_btn=null,this.gain_btn=null,this.graphics=null,this.need_redraw=!0},{success_btn:qc.Serializer.NODE,lose_btn:qc.Serializer.NODE,gain_btn:qc.Serializer.NODE,graphics:qc.Serializer.NODE});r.prototype.awake=function(){var e=this;this.game.world.onSizeChange.add(function(){e.need_redraw=!0}),e.success_btn.value=50,e.lose_btn.value=1,e.gain_btn.value=1,e.success_btn.initY=e.success_btn.anchoredY,e.lose_btn.initX=e.lose_btn.anchoredX,e.gain_btn.initX=e.gain_btn.anchoredX;var t=function(t,n){var r=n.source.startX,i=n.source.startY,s=n.source.x,o=n.source.y;e.need_redraw=!0,e.fixValue();if(t.name=="success"){var u=n.source.deltaY,a=t.value-u/4;a=e.game.math.min(99.99,a),a=e.game.math.max(.01,a),e.success_btn.value=a,a>=50?(e.gain_btn.value=1,e.lose_btn.value=a/(100-a)):(e.lose_btn.value=1,e.gain_btn.value=(100-a)/a),e.fixPosition()}else if(t.name=="lose"){var f=n.source.deltaX,l=t.value-f/20;l=e.game.math.max(1,l),e.lose_btn.value=l,e.gain_btn.value=1,e.success_btn.value=100*e.lose_btn.value/(e.lose_btn.value+e.gain_btn.value),e.fixPosition()}else if(t.name=="gain"){var f=n.source.deltaX,c=t.value+f/20;c=e.game.math.max(1,c),e.gain_btn.value=c,e.lose_btn.value=1,e.success_btn.value=100*e.lose_btn.value/(e.lose_btn.value+e.gain_btn.value),e.fixPosition()}};e.success_btn.addListener(e.success_btn.onDrag,t,e.success_btn),e.lose_btn.addListener(e.lose_btn.onDrag,t,e.lose_btn),e.gain_btn.addListener(e.gain_btn.onDrag,t,e.gain_btn)},r.prototype.fixPosition=function(){this.success_btn.anchoredY=this.success_btn.initY-(this.success_btn.value-50)*4,this.lose_btn.anchoredX=(1-this.lose_btn.value)*20+this.lose_btn.initX,this.gain_btn.anchoredX=(this.gain_btn.value-1)*20+this.gain_btn.initX,this.success_btn.find("value").text=this.success_btn.value.toFixed(2)+"%",this.lose_btn.find("value").text=this.lose_btn.value.toFixed(2),this.gain_btn.find("value").text=this.gain_btn.value.toFixed(2)},r.prototype.fixValue=function(){this.lose_btn.value<1&&this.gain_btn.value<1?(this.gain_btn.value=1,this.lose_btn.value=1):this.lose_btn.value<1?(this.gain_btn.value=this.gain_btn.value/this.lose_btn.value,this.lose_btn.value=1):this.gain_btn.value<1?(this.lose_btn.value=this.lose_btn.value/this.gain_btn.value,this.gain_btn.value=1):this.lose_btn.value>1&&this.gain_btn.value>1&&(this.lose_btn.value>=this.gain_btn.value?(this.lose_btn.value=this.lose_btn.value/this.gain_btn.value,this.gain_btn.value=1):(this.gain_btn.value=this.gain_btn.value/this.lose_btn.value,this.lose_btn.value=1)),this.success_btn.value=100*this.lose_btn.value/(this.lose_btn.value+this.gain_btn.value),this.fixPosition()},r.prototype.update=function(){if(!this.need_redraw)return;var e=16711680;this.lose_btn.value>this.gain_btn.value&&(e=65280),this.graphics.clear(),this.graphics.moveTo(this.success_btn.x,this.success_btn.y),this.graphics.beginFill(e),this.graphics.lineStyle(2,16767232,1),this.graphics.lineTo(this.lose_btn.x,this.lose_btn.y),this.graphics.lineTo(this.gain_btn.x,this.gain_btn.y),this.graphics.lineTo(this.success_btn.x,this.success_btn.y),this.graphics.endFill(),this.need_redraw=!1}}).call(this,this,Object)